/*
 *  jQuery Github - v0.3.0
 *  A jQuery plugin to display your Github Repositories.
 *  https://github.com/zenorocha/jquery-github/
 *
 *  Copyright (c) 2013
 *  MIT License
 */
(function(s,e){function t(e,t){var r=this;r.element=e,r.$container=s(e),r.repo=r.$container.attr("data-repo"),r.options=s.extend({},a,t),r._defaults=a,r._name=o,r.init(),r.displayIcons()}var o="github",a=(e.document,{iconStars:!0,iconForks:!0,iconIssues:!1});t.prototype.init=function(){var s=this,e=s.getCache();null!==e?s.applyTemplate(JSON.parse(e)):s.requestData(s.repo)},t.prototype.displayIcons=function(){$iconStars=s(".repo-stars"),$iconForks=s(".repo-forks"),$iconIssues=s(".repo-issues"),this.options.iconStars?$iconStars.css("display","inline-block"):$iconStars.css("display","none"),this.options.iconForks?$iconForks.css("display","inline-block"):$iconForks.css("display","none"),this.options.iconIssues?$iconIssues.css("display","inline-block"):$iconIssues.css("display","none")},t.prototype.applyTemplate=function(s){var e=this,t=e.parseTemplate(s);t.appendTo(e.$container)},t.prototype.cacheResults=function(s){var t=this;e.sessionStorage&&e.sessionStorage.setItem("gh-repos:"+t.repo,JSON.stringify(s))},t.prototype.getCache=function(){var s=this;return e.sessionStorage?e.sessionStorage.getItem("gh-repos:"+s.repo):!1},t.prototype.handlerErrorRequests=function(s){console.warn(s.message)},t.prototype.handlerSuccessfulRequest=function(s){var e=this;e.applyTemplate(s),e.cacheResults(s)},t.prototype.parsePushedDate=function(s){var e=new Date(s);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},t.prototype.parseRepositoryURL=function(s){return s.replace("api.","").replace("repos/","")},t.prototype.parseTemplate=function(e){var t=this,o=t.parsePushedDate(e.pushed_at),a=t.parseRepositoryURL(e.url);return s(s.parseHTML("       <div class='github-box'>          <div class='github-box-header'>           <h3>            <a href='"+a+"'>"+e.name+"</a>          </h3>           <div class='github-stats'>            <a class='repo-stars' title='Stars' data-icon='7' href='"+a+"/watchers'>"+e.watchers+"</a>            <a class='repo-forks' title='Forks' data-icon='f' href='"+a+"/network'>"+e.forks+"</a>            <a class='repo-issues' title='Issues' data-icon='i' href='"+a+"/issues'>"+e.open_issues+"</a>           </div>        </div>        <div class='github-box-content'>          <p>"+e.description+" &mdash; <a href='"+a+"#readme'>Read More</a></p>         </div>        <div class='github-box-download'>           <p class='repo-update'>Latest commit to <strong>master</strong> on "+o+"</p>          <a class='repo-download' title='Download as zip' data-icon='w' href='"+a+"/zipball/master'></a>         </div>      </div>      "))},t.prototype.requestData=function(e){var t=this;s.ajax({url:"https://api.github.com/repos/"+e,dataType:"jsonp",success:function(s){var e=s.data;s.meta.status>=400&&e.message?t.handlerErrorRequest():t.handlerSuccessfulRequest(e)}})},s.fn[o]=function(e){return this.each(function(){s.data(this,"plugin_"+o)||s.data(this,"plugin_"+o,new t(this,e))})}})(jQuery,window);
